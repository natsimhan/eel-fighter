var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);import{p as s,P as i}from"./phaser-DqFVsdsa.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class h extends s.Scene{constructor(){super("GameOver"),e(this,"camera"),e(this,"background"),e(this,"gameoverText"),e(this,"scoreText"),e(this,"score")}init(t){this.score=t.score,this.playSoundGameOver()}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(this.scale.width/2,this.scale.height/2,"background"),this.background.setAlpha(.2),this.gameoverText=this.add.text(this.scale.width/2,this.scale.height/3,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameoverText.setOrigin(.5),this.scoreText=this.add.text(this.scale.width/2,2*this.scale.height/3,"Score : "+this.score,{fontFamily:"Arial Black",fontSize:48,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.scoreText.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")})),setTimeout((()=>{var t;null==(t=this.input.keyboard)||t.on("keydown",(()=>{this.scene.start("MainMenu")}))}),2e3)}playSoundGameOver(){const t="game-over-arcade";this.sound.get(t)||this.sound.add(t),this.sound.play(t,{volume:1})}}class r extends i.GameObjects.Image{constructor(t,s,i,a){super(t,s,i,"fishPack",a),e(this,"myBody"),this.updateInsideBodySize()}get insideBody(){return this.myBody}updateInsideBodySize(){const t=this.getBounds();this.myBody=new i.Geom.Rectangle(t.left+t.width/4,t.top+t.height/4,t.width/2,t.height/2)}}class o extends r{constructor(t,s,a,h,r){super(t,s,a,h),e(this,"velocityX"),e(this,"velocityY"),e(this,"limitTop"),e(this,"limitBottom"),e(this,"healthMax"),e(this,"health"),e(this,"frameCount",0),e(this,"isDamaged",!1),e(this,"isDead",!1),e(this,"isDamagedPlayer",!1),t.add.existing(this),this.setFlipX(!0);const o=i.Math.FloatBetween(.5,Math.max(1.5,3*r));this.setScale(o/2),this.setOrigin(0,.5),this.velocityX=i.Math.Clamp(-50-150*(3-o)*1/r,-500,-50),this.velocityY=100*(i.Math.Between(0,1)?1:-1)*(3-o);const n=i.Math.Between(0,50);this.limitTop=a-n,this.limitBottom=a+n,this.healthMax=Math.ceil(2*o),this.health=this.healthMax}takeDamage(t){return!this.isDead&&(this.health-=t,this.setTintFill(16777215),this.isDamaged=!0,this.frameCount=0,this.health<=0&&(this.playSoundDeath(),this.isDead=!0,this.velocityY=50,this.setFrame(this.frame.name+"_bones"),this.scene.tweens.add({targets:this,alpha:0,duration:3e3}),!0))}update(t,e){if(this.isDamaged&&(this.frameCount++,1===this.frameCount?(this.clearTint(),this.setTintFill(8421504)):2===this.frameCount&&(this.clearTint(),this.isDamaged=!1)),this.isDead&&(this.velocityX*=.99,this.velocityY*=.9999),this.x+=this.velocityX*e/1e3,this.y+=this.velocityY*e/1e3,this.x<-this.getBounds().width||this.y>this.scene.scale.height+this.getBounds().height)return!this.isDead&&this.scene instanceof d&&this.scene.spawnEnemy(),void this.destroy();this.isDead||(this.y<this.limitTop?(this.y=this.limitTop,this.velocityY=-this.velocityY):this.y>this.limitBottom&&(this.y=this.limitBottom,this.velocityY=-this.velocityY)),this.updateInsideBodySize()}playSoundDeath(){const t="bubbles-1";this.scene.sound.get(t)||this.scene.sound.add(t),this.scene.sound.play(t,{volume:.8})}}class n extends r{constructor(t,s,a,h){super(t,s,a,"fishTile_bubble_0"),e(this,"velocityX"),e(this,"limitDestroy"),t.add.existing(this),this.setTintFill(8381951),this.setScale(.5),this.velocityX=h;const r=this.getBounds();this.limitDestroy=new i.Geom.Rectangle(-r.width,-r.height,t.scale.width+2*r.width,t.scale.height+2*r.height)}update(t,e){const s=this.scene.add.image(this.x,this.y,"fishPack","fishTile_bubble_0");s.setAlpha(.8),s.setTintFill(this.tint),s.setScale(this.scale),this.scene.tweens.add({targets:s,duration:100,alpha:0,scale:.1,onComplete:()=>s.destroy(!0)}),this.x+=this.velocityX*e/1e3,this.updateInsideBodySize(),i.Geom.Rectangle.Contains(this.limitDestroy,this.x,this.y)||this.destroy()}}class l extends i.GameObjects.Image{constructor(t){super(t,t.scale.width/6,t.scale.height/2,"fishPack","fishTile_fish_player"),e(this,"playerLimit"),e(this,"cursors"),e(this,"spaceKey"),e(this,"lastFired"),e(this,"health",100),e(this,"frameCount",0),e(this,"isDamaged",!1),e(this,"isDead",!1),t.add.existing(this),this.setScale(.5);const s=this.getBounds();this.playerLimit=new i.Geom.Rectangle(s.width,s.height-s.height/2,t.scale.width-2*s.width,t.scale.height-s.height),t.input.keyboard&&(this.cursors=t.input.keyboard.createCursorKeys(),this.spaceKey=t.input.keyboard.addKey(i.Input.Keyboard.KeyCodes.SPACE)),this.lastFired=0}update(t,e){if(this.isDamaged&&(this.frameCount++,1===this.frameCount?(this.clearTint(),this.setTintFill(8421504)):2===this.frameCount&&(this.clearTint(),this.isDamaged=!1)),this.cursors.left.isDown?this.setX(this.x-5):this.cursors.right.isDown&&this.setX(this.x+5),this.cursors.up.isDown?this.setY(this.y-5):this.cursors.down.isDown&&this.setY(this.y+5),this.y<this.playerLimit.top?this.y=this.playerLimit.top:this.y>this.playerLimit.bottom&&(this.y=this.playerLimit.bottom),this.x<this.playerLimit.left?this.x=this.playerLimit.left:this.x>this.playerLimit.right&&(this.x=this.playerLimit.right),this.spaceKey.isDown&&t>this.lastFired){const e=500,s=new n(this.scene,this.getBounds().right,this.y,e);this.scene instanceof d&&this.scene.playerShoot(s),this.lastFired=t+100}}takeDamage(t){return!this.isDead&&(this.health-=t,this.setTintFill(16777215),this.isDamaged=!0,this.frameCount=0,this.health<=0&&(this.isDead=!0,!0))}}const c=2e3;class d extends s.Scene{constructor(){super("Game"),e(this,"camera"),e(this,"background"),e(this,"player"),e(this,"enemyTextures"),e(this,"spawnInterval",c),e(this,"timeSinceLastSpawn",0),e(this,"bullets"),e(this,"enemies"),this.enemyTextures=["fishTile_fish_XS","fishTile_fish_S","fishTile_fish_M","fishTile_fish_L","fishTile_fish_XL","fishTile_fish_XXL"]}init(){this.timeSinceLastSpawn=0,this.spawnInterval=c,this.playSoundStart()}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor("#00002a"),this.background=this.add.image(this.scale.width/2,this.scale.height/2,"background"),this.background.setAlpha(.2),this.player=new l(this),this.bullets=this.add.group({classType:n,runChildUpdate:!0}),this.enemies=this.add.group({classType:o,runChildUpdate:!0}),this.scene.launch("Hud",{playerLife:this.player.health})}update(t,e){this.checkCollisions(),this.spawnEnemies(t,e),this.player.update(t,e)}playerShoot(t){this.bullets.add(t)}cameraShake(t,e,s){this.cameras.main.shake(s,new Phaser.Math.Vector2(t,e),!0)}spawnEnemy(){const t=this.scale.width+1,e=Phaser.Math.Between(50,this.scale.height-50),s=this.enemyTextures[Phaser.Math.Between(0,this.enemyTextures.length-1)],i=new o(this,t,e,s,this.spawnInterval/c);this.enemies.add(i)}spawnEnemies(t,e){this.timeSinceLastSpawn+=e,this.timeSinceLastSpawn>=this.spawnInterval&&(this.spawnEnemy(),this.timeSinceLastSpawn=0)}checkCollisions(){for(const t of this.enemies.children.entries)if(t instanceof o&&!t.isDead){for(const e of this.bullets.children.entries)e instanceof n&&Phaser.Geom.Intersects.RectangleToRectangle(e.insideBody,t.insideBody)&&(t.takeDamage(2)&&(this.scene.get("Hud").updateScore(t.healthMax),this.spawnInterval>100&&(this.spawnInterval-=10)),e.destroy());if(Phaser.Geom.Intersects.RectangleToRectangle(this.player.getBounds(),t.insideBody)&&!t.isDamagedPlayer){if(t.isDamagedPlayer=!0,this.player.takeDamage(t.healthMax)){const t=this.scene.get("Hud");this.scene.stop("Hud"),this.scene.start("GameOver",{score:t.score})}this.scene.get("Hud").updateLife(this.player.health),this.cameraShake(.02,.02,200)}}}playSoundStart(){const t="game-start-arcade";this.sound.get(t)||this.sound.add(t),this.sound.play(t,{volume:1})}}class u extends s.Scene{constructor(){super("Hud"),e(this,"scoreText"),e(this,"score"),e(this,"playerLifeMax"),e(this,"playerLife"),e(this,"lifeBarRectangle"),e(this,"lifeBarBackground"),e(this,"lifeBarForeground"),this.score=0,this.playerLifeMax=0,this.playerLife=0}init(t){this.score=0,this.playerLifeMax=t.playerLife,this.playerLife=t.playerLife}create(){this.scoreText=this.add.text(10,10,`Score: ${this.score}`,{fontFamily:"Arial Black",fontSize:32,stroke:"#000000",strokeThickness:8,color:"#ffffff"}).setOrigin(0,0),this.lifeBarRectangle=new Phaser.Geom.Rectangle(this.scale.width-this.scale.height/40-this.scale.width/4,this.scale.height/40,this.scale.width/4,this.scale.height/20),this.lifeBarBackground=this.add.graphics(),this.lifeBarBackground.fillStyle(0),this.lifeBarBackground.fillRect(this.lifeBarRectangle.left,this.lifeBarRectangle.top,this.lifeBarRectangle.width,this.lifeBarRectangle.height),this.lifeBarForeground=this.add.graphics(),this.updateLifeBar()}updateScore(t){this.score+=t,this.scoreText.setText(`Score: ${this.score}`)}updateLife(t){this.playerLife=Phaser.Math.Clamp(t,0,this.playerLifeMax),this.updateLifeBar()}updateLifeBar(){this.lifeBarForeground.clear();const t=this.playerLife/this.playerLifeMax,e=this.lifeBarRectangle.width*t,s=Phaser.Display.Color.Interpolate.ColorWithColor(new Phaser.Display.Color(255,0,0),new Phaser.Display.Color(0,255,0),100,100*t),i=Phaser.Display.Color.GetColor(s.r,s.g,s.b);this.lifeBarForeground.fillStyle(i),this.lifeBarForeground.fillRect(this.lifeBarRectangle.left,this.lifeBarRectangle.top,e,this.lifeBarRectangle.height)}}class g extends s.Scene{constructor(){super("MainMenu"),e(this,"background"),e(this,"logo"),e(this,"title"),e(this,"start"),e(this,"fish")}create(){this.background=this.add.image(this.scale.width/2,this.scale.height/2,"background"),this.logo=this.add.image(this.scale.width/2,this.scale.height/4,"logo"),this.title=this.add.text(.5*this.scale.width,this.logo.getBounds().bottom,"Eel Fighter",{fontFamily:"Arial Black",fontSize:63,color:"#0052ff",stroke:"#ffffff",strokeThickness:8,align:"center"}).setOrigin(.5).setRotation(-.1),this.start=this.add.text(this.scale.width/2,2*this.scale.height/3,"Start",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5).setInteractive(),this.start.on("pointerdown",(()=>{this.scene.start("Game")})),setTimeout((()=>{var t;null==(t=this.input.keyboard)||t.on("keydown",(()=>{this.scene.start("Game")}))}),2e3),this.fish=this.add.image(this.start.getBounds().left-20,this.start.getBounds().centerY,"fishPack","fishTile_fish_player"),this.fish.setOrigin(1,.5),this.fish.setScale(.6*this.start.getBounds().height/this.fish.getBounds().height),this.tweens.add({targets:this.fish,x:this.fish.x+10,yoyo:!0,repeat:-1,duration:500,ease:"Sine.easeInOut"})}}class f extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.atlas("fishPack","kenney_fish_pack.png","kenney_fish_pack.json"),this.load.audio("bubbles-1","sounds/bubbles-1.wav"),this.load.audio("game-start-arcade","sounds/game-start-arcade.wav"),this.load.audio("game-over-arcade","sounds/game-over-arcade.wav")}create(){this.scene.start("MainMenu")}}const m={type:i.WEBGL,width:1024,height:576,parent:"game-container",backgroundColor:"#028af8",scale:{mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH},scene:[a,f,g,d,u,h]};new i.Game(m);
